---
description:
globs:
alwaysApply: false
---
# **ğŸš« REGRA CRÃTICA: Frontend NUNCA Cria Endpoints**

**âš ï¸ ATENÃ‡ÃƒO**: Este Ã© um projeto **FRONTEND ONLY**. Nunca criar endpoints ou API routes.

## **âŒ ProibiÃ§Ãµes Absolutas**

### **1. Nunca Criar API Routes**
```typescript
// âŒ NUNCA FAZER: Criar endpoints no frontend
// app/api/v1/*/route.ts
// pages/api/*/ts
export async function GET() { /* ... */ } // PROIBIDO!
```

### **2. Nunca Implementar LÃ³gica de Backend**
```typescript
// âŒ NUNCA FAZER: LÃ³gica de servidor no frontend
const users = await database.query() // PROIBIDO!
const response = await processPayment() // PROIBIDO!
```

## **âœ… Comportamento Correto**

### **1. Sempre Consumir APIs Externas**
```typescript
// âœ… CORRETO: Conectar a APIs existentes
const response = await fetch('https://api.backend.com/users')
const data = await apiService.get('/users')
```

### **2. Usar ConfiguraÃ§Ã£o de API Externa**
```typescript
// âœ… CORRETO: Usar URLs do backend configuradas
const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL
const response = await fetch(`${API_BASE_URL}/endpoint`)
```

### **3. Tratar Erros de Conectividade**
```typescript
// âœ… CORRETO: Tratar quando backend nÃ£o responde
try {
  const data = await apiService.get('/endpoint')
} catch (error) {
  // Mostrar erro de conectividade, nÃ£o fallback mockado
  setError('Erro ao conectar com o servidor')
}
```

## **ğŸ”§ Estrutura Correta do Projeto**

### **Frontend Responsibilities:**
- **UI Components** - RenderizaÃ§Ã£o e interaÃ§Ã£o
- **State Management** - Estado da aplicaÃ§Ã£o
- **API Calls** - Chamadas para backend externo
- **Routing** - NavegaÃ§Ã£o entre pÃ¡ginas
- **Authentication** - Gerenciar tokens do backend

### **Backend Responsibilities (NÃƒO implementar aqui):**
- **Database Operations** - CRUD, queries
- **Business Logic** - Regras de negÃ³cio
- **Authentication** - ValidaÃ§Ã£o de credenciais
- **File Processing** - Upload, transformaÃ§Ã£o
- **Email/SMS** - Envio de notificaÃ§Ãµes

## **ğŸ“ Estrutura de Arquivos Permitida**

```
âœ… PERMITIDO:
â”œâ”€â”€ components/          # Componentes React
â”œâ”€â”€ hooks/              # Custom hooks
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ service.ts  # Cliente para API externa
â”‚   â””â”€â”€ utils/          # Utilities do frontend
â”œâ”€â”€ pages/              # PÃ¡ginas Next.js
â”œâ”€â”€ styles/             # CSS/Styling
â””â”€â”€ types/              # TypeScript types

âŒ PROIBIDO:
â”œâ”€â”€ app/api/            # API Routes Next.js
â”œâ”€â”€ pages/api/          # API Routes Pages
â”œâ”€â”€ server/             # CÃ³digo de servidor
â”œâ”€â”€ database/           # Acesso direto a DB
â””â”€â”€ models/             # Models de banco
```

## **ğŸŒ ConfiguraÃ§Ã£o de API**

### **Sempre Usar VariÃ¡veis de Ambiente**
```env
# âœ… CORRETO: Backend externo
NEXT_PUBLIC_API_URL=https://api.backend.com

# âŒ PROIBIDO: Endpoints locais
NEXT_PUBLIC_API_URL=http://localhost:3000/api
```

### **Validar Conectividade**
```typescript
// âœ… CORRETO: Verificar se backend estÃ¡ respondendo
export const healthCheck = async () => {
  try {
    const response = await fetch(`${API_BASE_URL}/health`)
    return response.ok
  } catch {
    return false
  }
}
```

## **ğŸš¨ CenÃ¡rios de Erro Comuns**

### **1. Backend IndisponÃ­vel**
```typescript
// âœ… CORRETO: Mostrar erro ao usuÃ¡rio
if (!backendAvailable) {
  return <ErrorBanner message="Servidor temporariamente indisponÃ­vel" />
}

// âŒ ERRADO: Criar endpoint local como fallback
```

### **2. Endpoint NÃ£o Encontrado**
```typescript
// âœ… CORRETO: Validar endpoints com backend
const endpoints = await validateEndpoints()

// âŒ ERRADO: Criar endpoint local
```

## **ğŸ“‹ Checklist de Desenvolvimento**

Antes de implementar qualquer feature:

- [ ] **Verificar se Ã© responsabilidade do frontend**
- [ ] **Confirmar que endpoints existem no backend**
- [ ] **Usar apenas clientes HTTP (fetch, axios)**
- [ ] **Configurar variÃ¡veis de ambiente corretas**
- [ ] **Implementar tratamento de erro de conectividade**
- [ ] **NUNCA criar arquivos em `app/api/` ou `pages/api/`**

## **ğŸ” Tools para Discovery de APIs**

### **Usar apidof-mcp-server**
```typescript
// âœ… CORRETO: Descobrir endpoints disponÃ­veis
// Use apidof-mcp-server para encontrar APIs existentes
// antes de implementar qualquer integraÃ§Ã£o
```

## **âš ï¸ ConsequÃªncias de Violar Esta Regra**

1. **Arquitetura Quebrada** - Frontend fazendo papel do backend
2. **Deployment ProblemÃ¡tico** - CÃ³digo de servidor em cliente
3. **Security Issues** - LÃ³gica sensÃ­vel exposta
4. **Manutenibilidade** - Responsabilidades misturadas

---

**ğŸ¯ LEMBRE-SE: Frontend = Cliente | Backend = Servidor**

**Sempre pergunte: "Isso deveria estar no servidor?" Se sim, NÃƒO implemente no frontend.**
