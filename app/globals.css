@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;

    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;

    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;

    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;

    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;

    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;

    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;

    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;

    --radius: 0.5rem;

    /* Cores específicas do workflow */
    --workflow-grid-color: 210 40% 96.1%;
    --workflow-connection-color: 215 16% 47%;
    --workflow-connection-hover: 24 95% 64%;
    --workflow-connection-selected: 221 83% 53%;
    --workflow-node-border: 216 12% 84%;
    --workflow-node-selected: 221 83% 53%;
    --workflow-node-hover: 24 95% 64%;
    --workflow-selection-box: 221 83% 53%;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;

    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;

    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;

    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;

    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;

    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;

    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;

    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;

    /* Cores específicas do workflow no modo escuro */
    --workflow-grid-color: 217 33% 18%;
    --workflow-connection-color: 215 20% 65%;
    --workflow-connection-hover: 24 95% 64%;
    --workflow-connection-selected: 221 83% 65%;
    --workflow-node-border: 215 14% 34%;
    --workflow-node-selected: 221 83% 65%;
    --workflow-node-hover: 24 95% 64%;
    --workflow-selection-box: 221 83% 65%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* Estilos específicos do workflow */
.workflow-canvas {
  position: relative;
  overflow: hidden;
  width: 100%;
  height: 100%;
  background-color: hsl(var(--background));
}

.workflow-node {
  position: absolute;
  user-select: none;
  transition: transform 0.1s ease-out;
}

.workflow-connection {
  pointer-events: none;
}

.workflow-connection path {
  pointer-events: stroke;
}

.connection-path {
  fill: none;
  stroke: hsl(var(--workflow-connection-color));
  stroke-width: 1.5;
  transition: stroke 0.2s ease, stroke-width 0.2s ease;
}

.workflow-connection[data-hovered="true"] .connection-path {
  stroke-width: 2px;
}

.connection-selected {
  stroke: hsl(var(--workflow-connection-selected));
  stroke-width: 2;
}

.connection-hover {
  stroke: hsl(var(--workflow-connection-hover));
  stroke-width: 2;
}

.connection-animated {
  stroke-dasharray: 5, 3;
  animation: dash 1s linear infinite;
}

.connection-endpoint {
  fill: hsl(var(--workflow-connection-color));
  stroke: hsl(var(--background));
  stroke-width: 1;
}

.node-quick-actions {
  position: absolute;
  top: -40px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 30;
  display: flex;
  gap: 4px;
  background-color: hsl(var(--background));
  border: 1px solid hsl(var(--border));
  border-radius: 4px;
  padding: 4px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.selection-box {
  position: absolute;
  border: 1px solid hsl(var(--workflow-selection-box));
  background-color: hsl(var(--workflow-selection-box) / 0.1);
  pointer-events: none;
}

.mini-map {
  position: absolute;
  bottom: 20px;
  right: 20px;
  width: 200px;
  height: 150px;
  background-color: hsl(var(--background));
  border: 1px solid hsl(var(--border));
  border-radius: 4px;
  overflow: hidden;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  z-index: 20;
}

.mini-map-viewport {
  position: absolute;
  border: 1px solid hsl(var(--workflow-node-selected));
  background-color: hsl(var(--workflow-node-selected) / 0.1);
  pointer-events: none;
}

.canvas-controls {
  position: absolute;
  bottom: 20px;
  left: 20px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  z-index: 20;
}

.context-menu {
  position: fixed;
  z-index: 100;
  background-color: hsl(var(--background));
  border: 1px solid hsl(var(--border));
  border-radius: 4px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  min-width: 160px;
  overflow: hidden;
}

.context-menu-item {
  padding: 8px 12px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 8px;
  transition: background-color 0.15s ease;
}

.context-menu-item:hover {
  background-color: hsl(var(--secondary));
}

.context-menu-separator {
  height: 1px;
  background-color: hsl(var(--border));
  margin: 4px 0;
}

.connection-action-button rect:hover {
  fill-opacity: 0.1;
}

.animated-path {
  stroke-dasharray: 5, 5;
  animation: dash 1s linear infinite;
}

/* Animações */
@keyframes dash {
  to {
    stroke-dashoffset: -10;
  }
}

@keyframes pulse {
  0% {
    opacity: 0.6;
  }
  50% {
    opacity: 1;
  }
  100% {
    opacity: 0.6;
  }
}

.animate-dash {
  stroke-dasharray: 5, 3;
  animation: dash 1s linear infinite;
}

.animate-pulse {
  animation: pulse 1.5s ease-in-out infinite;
}
